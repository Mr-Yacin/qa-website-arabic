import{r as u}from"./index.Cd_vQiNd.js";var p={exports:{}},x={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R;function b(){if(R)return x;R=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function d(f,e,r){var c=null;if(r!==void 0&&(c=""+r),e.key!==void 0&&(c=""+e.key),"key"in e){r={};for(var o in e)o!=="key"&&(r[o]=e[o])}else r=e;return e=r.ref,{$$typeof:s,type:f,key:c,ref:e!==void 0?e:null,props:r}}return x.Fragment=a,x.jsx=d,x.jsxs=d,x}var h;function E(){return h||(h=1,p.exports=b()),p.exports}var i=E();function y({slug:s}){const[a,d]=u.useState(0),[f,e]=u.useState(0),[r,c]=u.useState(!1),[o,m]=u.useState(!1);u.useEffect(()=>{if(typeof window<"u"){const t=localStorage.getItem(`rating:${s}`);if(t){const n=parseInt(t,10);n>=1&&n<=5&&(d(n),m(!0))}}},[s]);const g=async t=>{if(!(r||o)){c(!0);try{localStorage.setItem(`rating:${s}`,t.toString()),d(t),m(!0),(await fetch(`/api/rate?slug=${encodeURIComponent(s)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:t})})).ok||console.warn("Failed to submit rating to server, but saved locally")}catch(n){console.error("Error submitting rating:",n)}finally{c(!1)}}},k=(t,n)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),g(n))},v=t=>{const n=t<=(f||a),l=o||r;return i.jsx("button",{type:"button",className:`
          text-2xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-indigo-400 dark:focus:ring-offset-zinc-900 rounded will-change-transform
          ${l?"cursor-default":"cursor-pointer hover:scale-110 transform"}
          ${n?"text-yellow-400 dark:text-yellow-300":"text-zinc-300 dark:text-zinc-600"}
        `,onClick:()=>!l&&g(t),onMouseEnter:()=>!l&&e(t),onMouseLeave:()=>!l&&e(0),onKeyDown:S=>k(S,t),disabled:l,"aria-label":`قيم بـ ${t} ${t===1?"نجمة":"نجوم"}`,"aria-pressed":t<=a,children:"★"},t)};return i.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-zinc-50 dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-700 transition-colors duration-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 transition-colors duration-200",children:"قيم هذا السؤال"}),i.jsx("div",{className:"flex gap-1",role:"radiogroup","aria-label":"تقييم السؤال من 1 إلى 5 نجوم",children:[1,2,3,4,5].map(v)}),o&&i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 text-center transition-colors duration-200",children:["شكراً لك! تم حفظ تقييمك (",a," ",a===1?"نجمة":"نجوم",")"]}),r&&i.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-400 text-center transition-colors duration-200",children:"جاري الحفظ..."}),!o&&!r&&i.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 text-center transition-colors duration-200",children:"اضغط على النجوم لإعطاء تقييم"})]})}export{y as default};
